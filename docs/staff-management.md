# スタッフ管理機能

## 概要

Googleスプレッドシートでスタッフ情報を管理し、システムと同期する機能です。

## スプレッドシート設定

### スプレッドシート情報
- **スプレッドシートID**: `19yAuVYQRm-_zhjYX7M7zjiGbnBibkG77Mpz93sN1xxs`
- **シート名**: `スタッフ`

### スプレッドシートのフォーマット

スプレッドシートは以下の形式で作成してください：

| A列（メールアドレス） | B列（名前） |
|---------------------|-----------|
| email@example.com   | 山田太郎   |
| test@example.com    | 佐藤花子   |

#### 注意事項
- 1行目はヘッダー行として使用されます（データとして読み込まれません）
- A列: メールアドレス（必須）
- B列: スタッフ名（必須）
- メールアドレスと名前の両方が入力されている行のみが同期されます
- 空白行は自動的にスキップされます

### 例

```
A列                          B列
メールアドレス                名前
tomoko.kunihiro@ifoo-oita.com  国広智子
yurine.kimura@ifoo-oita.com    木村友梨音
mariko.kume@ifoo-oita.com      久米真理子
```

## 使用方法

### 1. スプレッドシートの準備

1. 上記のスプレッドシートIDのスプレッドシートを開く
2. 「スタッフ」シートにスタッフ情報を入力
3. A列にメールアドレス、B列に名前を入力

### 2. システムとの同期

1. 管理者アカウントでログイン
2. ヘッダーの「スタッフ管理」ボタンをクリック
3. 「スプレッドシートから同期」ボタンをクリック
4. 同期結果が表示されます
   - 追加: 新規に追加されたスタッフ数
   - 更新: 名前が更新されたスタッフ数
   - 全: スプレッドシートに記載されているスタッフ総数

### 3. 同期の動作

- **新規スタッフ**: スプレッドシートに存在し、データベースに存在しない場合は新規作成
- **既存スタッフ**: メールアドレスが一致する場合、名前が異なれば更新
- **削除**: スプレッドシートから削除されたスタッフは自動削除されません（手動削除が必要）

## 権限

### 管理者のみアクセス可能

以下のメールアドレスのユーザーのみがスタッフ管理機能にアクセスできます：
- tomoko.kunihiro@ifoo-oita.com
- yurine.kimura@ifoo-oita.com
- mariko.kume@ifoo-oita.com

### 必要な権限

- Googleカレンダーとの連携が必要です
- スプレッドシートへの読み取り権限が必要です

## トラブルシューティング

### 「Googleアカウントとの連携が必要です」エラー

1. ホーム画面に戻る
2. 「Googleカレンダー連携」セクションで連携を行う
3. 連携完了後、再度スタッフ管理画面で同期を実行

### 「スプレッドシートの読み込みに失敗しました」エラー

1. スプレッドシートIDが正しいか確認
2. スプレッドシートへのアクセス権限があるか確認
3. シート名が「スタッフ」になっているか確認

### スタッフが同期されない

1. スプレッドシートのフォーマットが正しいか確認
2. メールアドレスと名前の両方が入力されているか確認
3. 空白や余分なスペースがないか確認

## セキュリティ

- スプレッドシートへのアクセスは、Googleアカウント連携を通じて行われます
- アクセストークンは暗号化してデータベースに保存されます
- 管理者のみがスタッフ情報の同期を実行できます

## 今後の拡張

- 自動同期機能（定期的にスプレッドシートから同期）
- スタッフの削除機能
- スタッフ情報の手動編集機能
- 同期履歴の表示
